@model Bulky.Models.ShoppingCard

<form method="post" class="my-5">
    <input hidden asp-for="ProductId" />
    <div class="card shadow-sm border-0 rounded-4">
        <div class="card-header bg-gradient bg-primary text-white py-4 rounded-top-4 text-center">
            <h3 class="text-uppercase fw-bold mb-1">@Model.Product.Title</h3>
            <p class="text-white-50 mb-0 fst-italic">by @Model.Product.Author</p>
        </div>

        <div class="card-body p-4">
            <div class="row mb-4">
                <div class="col-6 col-md-2 offset-lg-1 pb-2">
                    <a asp-area="Customer" asp-controller="Home" asp-action="Index" class="btn btn-outline-primary rounded-pill fw-semibold text-uppercase w-100 shadow-sm">
                        <small>Back to home</small>
                    </a>
                </div>
            </div>

            <div class="row gy-4">
                <div class="col-12 col-lg-3 offset-lg-1 text-center">
                    @{
                        string imgUrl = Model.Product.ImgURL ?? "";
                        imgUrl = imgUrl.Replace("\\", "/");
                        if (!string.IsNullOrEmpty(imgUrl) && !imgUrl.StartsWith("http") && !imgUrl.StartsWith("/"))
                        {
                            imgUrl = "/" + imgUrl;
                        }
                    }
                    @if (!string.IsNullOrEmpty(imgUrl))
                    {
                        <img src="@imgUrl" alt="@Model.Product.Title" class="img-fluid rounded-4 shadow-sm border border-light" style="max-height:450px; object-fit:contain;" />
                    }
                    else
                    {
                        <img src="/images/no-image.png" alt="No Image" class="img-fluid rounded-4 shadow-sm border border-light" style="max-height:450px; object-fit:contain;" />
                    }
                </div>

                <div class="col-12 col-lg-6 offset-lg-1">
                    <div class="mb-3">
                        <span class="badge bg-primary rounded-pill px-4 py-2 fw-semibold fs-6">@Model.Product.Category?.Name </span>
                    </div>

                    <h6 class="text-muted mb-2">ISBN: <span class="fw-normal">@Model.Product.ISBN</span></h6>

                    <div class="mb-3 d-flex align-items-center gap-3">
                        <small class="text-muted">List Price :</small>
                        <span class="text-decoration-line-through text-muted fs-5">@Model.Product.ListPrice.ToString("C")</span>
                    </div>


                    <div class="row text-center mb-4">
                        <div class="col-3">
                            <div class="fw-semibold text-secondary mb-1">Quantity</div>
                            <div class="fw-semibold text-secondary mb-1">Price</div>
                        </div>
                        <div class="col-3">
                            <div class="fw-semibold text-secondary mb-1">1-50</div>
                            <div class="text-primary fw-bold fs-5">@Model.Product.Price.ToString("C")</div>
                        </div>
                        <div class="col-3">
                            <div class="fw-semibold text-secondary mb-1">51-100</div>
                            <div class="text-primary fw-bold fs-5">@Model.Product.Price50.ToString("C")</div>
                        </div>
                        <div class="col-3">
                            <div class="fw-semibold text-secondary mb-1">100+</div>
                            <div class="text-primary fw-bold fs-5">@Model.Product.Price100.ToString("C")</div>
                        </div>
                    </div>

                    <div class="mb-4" style="min-height: 100px; color: #121212; line-height: 1.5;">
                        @Html.Raw(Model.Product.Description)
                    </div>

                    <div class="input-group mb-4" style="max-width: 180px;">
                        <span class="input-group-text bg-primary text-white fw-semibold rounded-start">Count</span>
                        <input asp-for="Count" type="number" min="1" value="1" class="form-control text-end rounded-end" aria-label="Count input" name="Count" />
                    </div>

                    <button type="submit"  class="btn btn-primary w-100 py-3 fw-bold text-uppercase rounded-pill shadow-sm" style="letter-spacing: 0.1em;">
                        Add to Cart 
                    </button>
                </div>
            </div>
        </div>
    </div>
</form>
